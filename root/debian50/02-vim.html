<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf8" />
    <title>vi拡張 | How to Linode</title>
    <meta name="keywords" content="" />
    <meta name="description" content="viは自由に拡張する事ができます。ここでは一例を紹介します。" />
    <meta name="robots" content="all" />

    <link rel="stylesheet" type="text/css" media="screen" href="../common/css/import.css"/>
</head>
<body>
	<div id="wrapper">
		<div id="wrap">
			<div id="header">
				<p id="title"><a href="/">How to Linode</a></p>
			</div>
<!-- category[start] -->
<ul id="tab">
<li><a href="/" class="home">HOME</a></li>
<li><a href="/centos53/" class="centos53">CentOS5.3</a></li>
<li><a href="/debian50/" class="debian50 current">Debian5.0</a></li>
</ul>
<!-- category[end] -->

<!-- bread[start] -->
<p id="bread">
<a href="/">home</a> &gt;
vi拡張
</p>
<!-- bread[end] -->

			<div id="side-bar">
<!-- menu[start] -->
<h3>初期設定</h3>
<ul class="menu">
    <li><a href="index.html">接続元ネットワークを制限する</a></li>
    <li><a href="02-ssh.html">SSHのログオンユーザーを制限</a></li>
    <li><a href="02-sudo.html">sudo導入</a></li>
    <li><a href="02-vim.html">vi拡張</a></li>
    <li><a href="02-screen.html">screen導入</a></li>
    <li><a href="02-zsh.html">zsh導入</a></li>
    <li><a href="02-ntpd.html">日付設定</a></li>
    <li><a href="02-service_all.html">サービス確認</a></li>
</ul>
<!-- menu[end] -->

			</div>
		    <div id="content">
		        <h1 id="vi拡張">vi拡張</h1>
<p id="description">viは自由に拡張する事ができます。<br />ここでは一例を紹介します。</p>
<h2 id="エイリアスの設定">エイリアスの設定</h2>
<pre class="wiki">
$ alias vi=&quot;vim&quot;
</pre>
<p>
ただし、この状態ではsudo vi とした場合はroot権限でvimではなく、viを使用することになるので次の設定も行う。
</p>
<pre class="wiki">
$ alias sudo='sudo '
</pre>
<p>
わかりづらいのですがsudoの後ろに半角スペースをつけています。
</p>
<h2 id="確認">確認</h2>
<p>
vimのバージョンを確認します。
</p>
<pre class="wiki">
$ sudo aptitude show vim
</pre>
<p>
古いので新しくします。
</p>
<pre class="wiki">
$ sudo update
$ sudo aptitude install vim
</pre>
<h2 id="設定ファイル編集">設定ファイル編集</h2>
<p>
ユーザーのvim設定ファイルを編集します。
</p>
<pre class="wiki">
$ vi ~/.vimrc
</pre>
<p>
次のように、各自好きな設定を記述してください。
</p>
<pre class="wiki">
&quot; autocmd
autocmd!

&quot; set bufname to screen's title
autocmd BufEnter * if bufname(&quot;&quot;) !~ &quot;^\[A-Za-z0-9\]*://&quot; | silent! exe '!echo -n &quot;\ek%:t\e\\&quot;' | endif

syntax enable

&quot; encoding
set fileencoding=utf-8
set fileencodings=utf-8,iso-2022-jp,euc-jp,cp932
set fileformats=unix,dos,mac
set encoding=utf-8

&quot; statusline
set statusline=%&lt;%f\ %m%r%h%w%y%{'['.(&amp;fenc!=''?&amp;fenc:&amp;enc).']['.&amp;ff.']'}%=%4v\ %l/%L
set laststatus=2

&quot; 編集中のファイル名を表示
&quot; 画面の左側に常時''行番''を表示する。
&quot; ルーラーを表示する。
set title
set number
set ruler

&quot; タブの見掛けの表示幅を4文字分にする。
&quot; オートインデント時に使用するインデントの深さも4文字分にする。
&quot; 自身がタブを入力時した際に、タブの代わりに4文字の半角スペースに置き換える
set tabstop=4
set shiftwidth=4
set softtabstop=4

&quot; タブが挿入された文章を編集する場合、タブの代わりに半角スペースに置き換えるようにする。
&quot; 行頭の余白内でTabを打ち込むと'shiftwidth'の数だけインデントする。
set expandtab
set smarttab

&quot; 高度な自動インデントを行う
set smartindent

&quot; インクリメンタルサーチ
set incsearch

&quot; 対括弧の表示
&quot; モード表示
set showmatch
set showmode

&quot; キーバインドをEmacs スタイルにする。
&quot; Ctrl+Aで行頭へ移動
&quot; Ctrl＋Bで一文字戻る
&quot; Ctrl+Dでカーソルの下の文字を削除
&quot; Ctrl+Eで行末へ移動
&quot; Ctrl+Fで一文字進む

:noremap &lt;C-A&gt;  &lt;Home&gt;
:noremap &lt;C-B&gt;   &lt;Left&gt;
:noremap &lt;C-D&gt;   &lt;Del&gt;
:noremap &lt;C-E&gt;   &lt;End&gt;
:noremap &lt;C-F&gt;   &lt;Right&gt;

&quot; コマンドエイリアス
:noremap ,t    :!prove -vl %&lt;CR&gt;
:noremap ,pt   :%!perltidy %&lt;CR&gt;
:noremap ,ptv  :! perltidy&lt;CR&gt;
:noremap ,gcc :!gcc -Wall -o %&lt; %&lt;CR&gt;:!%&lt;&lt;CR&gt;

&quot; 日時の入力補助
:inoremap &lt;expr&gt; ,df strftime('%Y-%m-%dT%H:%M:%S')
:inoremap &lt;expr&gt; ,dd strftime('%Y-%m-%d')
:inoremap &lt;expr&gt; ,dt strftime('%H:%M:%S')

&quot; コロンを識別子の有効な一部として認識させる
set iskeyword+=:


&quot; コメントを見やすい色へ変更
hi Comment cterm=bold ctermbg=black

&quot; 全角スペースを視覚化
highlight ZenkakuSpace cterm=underline ctermfg=lightblue guibg=white
match ZenkakuSpace /　/
</pre>
<p>
なお、コピーしたテキストをvim上へペーストする場合
コマンドモードで次のように入力するとよいでしょう。
</p>
<pre class="wiki">
:set paste
:set paste
</pre>
<h2 id="ヘルプの使い方">ヘルプの使い方</h2>
<p>
コマンドモードで次のコマンドを実行します。
</p>
<pre class="wiki">
:help
</pre>
<p>
ウィンドウが2つに分かれてます。このウィンドウを次のコマンドで行き来します。
</p>
<pre class="wiki">
[Ctrl-w][Ctrl-w]
</pre>
<p>
次のコマンドでカレントウィンドウを閉じます。
</p>
<pre class="wiki">
[Ctrl-w]c
</pre>
<h2 id="参考となる設定ファイル">参考となる設定ファイル</h2>
<p>
<a class="ext-link" href="http://github.com/"><span class="icon"></span>gitHub</a>には多くの開発者が自身のプロジェクトを公開しています。
</p>
<p>
これらの中でdotfilesと記述されているプロジェクトにはこれらの設定をする際に大変参考になります。
</p>

		    </div>
			<br class="clear" />
			<div id="footer">
				<p>
					<a href="http://linode.jp">Linode</a> | 
					<a href="http://www.add9.biz/phpunit">PHPUnit</a> | 
					<a href="http://www.add9.biz/symfony">Symfony</a>
					<br />
				
					<a href="http://www.add9.biz/c">C</a> | 
					<a href="http://www.add9.biz/moose">Moose</a> | 
					<a href="http://www.add9.biz/design_pattern">Design Pattern</a>
					<br />

					<a href="http://www.add9.biz/jump">Jump Attack Forum</a> | 
					<a href="http://dancepod.tv">DancePod.tv</a>
				</p>
			</div>
	    </div>
		<div id="adsence">
			<script type="text/javascript"><!--
			google_ad_client = "pub-3627018862025650";
			google_ad_slot = "0294735282";
			google_ad_width = 160;
			google_ad_height = 600;
			//-->
			</script>
			<script type="text/javascript"
			src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
			</script>
		</div>
	</div>
	<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
	try {
	var pageTracker = _gat._getTracker("UA-7965172-1");
	pageTracker._trackPageview();
	} catch(err) {}</script>
</body>
</html>
