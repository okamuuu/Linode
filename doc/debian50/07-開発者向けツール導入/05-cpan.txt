= cpan =

'''''Ruby、PHPではなくPerlを使う利用あるとすれば、それはCPANです'''''

== cpan-miniについて ==

''CPAN''にはあなたが必要なモジュールと、そうでないモジュールがあると思いますが、CPANモジュールは最新のソースコードのみであればそれほど大した量ではないのでcpan-miniで丸ごとソースを保存しておきます。

== cpan-miniを導入 ==

検索

{{{
% sudo aptitude update
% sudo aptitude upgrade
% sudo aptitude search libcpan-mini-perl
p   libcpan-mini-perl - create a minimal mirror of CPAN
}}}

インストール

{{{
% sudo aptitude -y install libcpan-mini-perl
}}}

バージョン確認

{{{
% git --version
git version 1.5.6.5
}}}

CPANモジュールのソースコードをdev01.ca上に保存します。
ちなみに最初にこの作業をすると結構時間がかかります。

[http://www.cpan.org/SITES.html ミラーはこちら参照]

{{{
% sudo minicpan -r http://www.perl.com/CPAN/ -l /root/minicpan
}}}

確認

{{{
% sudo ls /root/minicpan
authors  modules
}}}


次に、この ~/minicpan からインストールするように cpan 側を設定します。
''prerequisites_policy''というのは何度もYesと答えたくない場合にそうします。

{{{
# cpan
cpan> o conf prerequisites_policy follow
cpan> o conf urllist unshift file:///root/minicpan
cpan> o conf
cpan> o conf commit
cpan> q
}}}


== 定期実行 ==

次回からは初回ほど時間がかからないので''cron''で定期実行するようにします。

{{{
% sudo vi /etc/cron.daily/minicpan
0 5 * * * minicpan -q -r http://www.perl.com/CPAN/ -l /root/minicpan
}}}

